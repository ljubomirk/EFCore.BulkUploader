@model WebApp.ViewModels.LifecycleSearchViewModel;
@{
    ViewData["Title"] = "CouponFilter";
}

@using (Html.BeginForm("Search", "Lifecycle", FormMethod.Post, new { role = "form", id = "PromotionForm" }))
{

    <!-- header -->
    <div class="container">
        <div class="row">
            <h4>
                @CouponDatabase.Properties.Resources.CouponFilter_Search
            </h4>
        </div>
    </div>
    <!-- /header -->

    <!-- form -->
    <div class="form-box">
        <div class="container">
            <!-- top form return msg -->
            <div class="@(ViewBag.CommandStatus == "[ERROR]" ? "form-box__msg form-box__msg-error" : "form-box__msg form-box__msg-success") @(ViewBag.CommandStatus == null ? "hiddendiv" : "")">@ViewBag.CommandStatus  @ViewBag.CommandMessage</div>
            
            
            <partial name="LifecyclePromotionFilter" />

            <partial name="LifecycleCouponFilter" />

            <!-- actions -->
            <div class="row u-m-t-xl">
                <div class="col s12">
                    <button type="submit" class="waves-effect waves-light btn-flat btn-primary">
                        <i class="material-icons left">search</i>
                        @CouponDatabase.Properties.Resources.Btn_Search
                    </button>
                </div>
            </div>
            <!-- /actions -->
        </div>
    </div>
    <!-- /form -->
}

<script src="~/js/calendar.js" asp-append-version="true"></script>
<script>
    $(document).ready(function () {
        // init date picker
        $('.calendar').calendar().change(function (e) {
            // validate date format
            // TODO: regex should be changed depending on locale
            var input = $(this);
            var re = /^[0-9]{2}.[0-9]{2}.[0-9]{4}$/;
            var valid = re.test(e.target.value);
            if (valid) {
                input.removeClass("invalid").addClass("valid");
            }
            else {
                input.removeClass("valid").addClass("invalid");
            }

        });

        // emable validation tooltip message
        $('.validation-error').tooltip();
    });

</script>



