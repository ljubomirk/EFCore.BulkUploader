@model WebApp.ViewModels.LifecycleUpdateViewModel
@{
    ViewData["Title"] = "_UpdateFilter";

    List<SelectListItem> promotionNames = new List<SelectListItem>();
    if (Model.DropPromoNames != null)
    {
        promotionNames = Model.DropPromoNames;
    }

    List<SelectListItem> couponSeries = new List<SelectListItem>();
    if (Model.DropCouponSeries != null)
    {
        couponSeries = Model.DropCouponSeries;
    }

    bool disableCouponSeries = Model.SelectedPromoName == null ? true : false;
}

<!-- Form submit on dropdown filter change -->
@using (Html.BeginForm("UpdateSearchFilter", "Lifecycle", FormMethod.Post, new { role = "form", id = "UpdateSearchFilter" }))
{
    <div class="col s2">
        @Html.DropDownListFor(p => p.SelectedPromoName, promotionNames, @CouponDatabase.Properties.Resources.DropDown_OptionNotSelectedText, new { @class = "filter-coupon", onchange = "this.form.submit();" })
    </div>

    <div class="col s2">
        @if (disableCouponSeries)
        {
            @Html.DropDownListFor(c => c.SelectedCouponSeries, couponSeries, @CouponDatabase.Properties.Resources.DropDown_OptionNotSelectedText, new { @class = "filter-coupon", onchange = "this.form.submit();", @disabled = "disabled" })
        }
        else
        {
            @Html.DropDownListFor(c => c.SelectedCouponSeries, couponSeries, @CouponDatabase.Properties.Resources.DropDown_OptionNotSelectedText, new { @class = "filter-coupon", onchange = "this.form.submit();" })
        }

    </div>
}